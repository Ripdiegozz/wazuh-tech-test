// ============================================
// Table View
// ============================================

.todo-table {
  background: $euiColorEmptyShade;
  border-radius: $euiBorderRadius;
  border: $euiBorderThin;
  overflow: hidden;

  // Make table scrollable horizontally - FORCE horizontal layout
  .euiBasicTable {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  // CRITICAL: Override EUI responsive behavior that stacks table cells
  // Force table to always display as a proper table, never as stacked cards
  .euiTable {
    min-width: 900px; // Ensure horizontal scroll triggers

    // Force table layout
    &.euiTable--responsive {
      .euiTableRow {
        display: table-row !important;
        flex-wrap: nowrap !important;

        .euiTableRowCell {
          display: table-cell !important;
          width: auto !important;
          max-width: none !important;

          // Hide mobile header labels that EUI adds
          .euiTableRowCell__mobileHeader {
            display: none !important;
          }
        }
      }

      // Ensure header stays as table layout too
      .euiTableHeaderCell {
        display: table-cell !important;
      }
    }
  }

  &__header {
    padding: $euiSizeM;
    border-bottom: $euiBorderThin;
    background: $euiColorLightestShade;

    h3 {
      @include euiTitle("xs");
      margin: 0;
    }
  }

  &__filters {
    padding: $euiSizeM;
    background: $euiColorLightestShade;
    border-bottom: $euiBorderThin;
  }

  &__bulk-actions {
    padding: $euiSizeS $euiSizeM;
    background: $euiColorLightestShade;
    border-bottom: $euiBorderThin;

    .euiCheckbox__label {
      font-size: $euiFontSizeS;
      color: $euiColorDarkShade;
    }
  }

  &__footer {
    padding: $euiSizeS $euiSizeM;
    border-top: $euiBorderThin;
    color: $euiColorMediumShade;
    font-size: $euiFontSizeXS;
    background: $euiColorLightestShade;
  }

  // Work item cell styles
  &__work-cell {
    display: flex;
    align-items: center;
    gap: $euiSizeS;
    min-width: 0; // Allow flex children to shrink below content size
    max-width: 100%;
    overflow: hidden;

    // Pending state - shows spinner and dims content
    &--pending {
      opacity: 0.6;

      .euiLink {
        pointer-events: none;
      }
    }

    // Link container needs truncation too
    .euiLink,
    > span {
      display: flex;
      align-items: center;
      min-width: 0;
      overflow: hidden;
    }
  }

  &__work-id {
    color: $euiColorMediumShade;
    font-family: $euiCodeFontFamily;
    font-size: $euiFontSizeXS;
    flex-shrink: 0; // Keep ID always visible
  }

  &__work-title {
    font-weight: $euiFontWeightMedium;
    color: $euiColorPrimaryText;
    margin-left: $euiSizeS;

    // Truncation styles
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 250px; // Limit title width
    display: inline-block;

    &:hover {
      text-decoration: underline;
    }
  }

  // Assignee cell
  &__assignee {
    display: flex;
    align-items: center;
    gap: $euiSizeS;
  }

  &__assignee-avatar {
    width: $euiSizeL;
    height: $euiSizeL;
    border-radius: 50%;
    background: $euiColorVis0;
    color: $euiColorEmptyShade;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: $euiFontSizeXS;
    font-weight: $euiFontWeightSemiBold;
  }
}
